<div class="container">
  <mat-drawer-container>
<!--    <mat-spinner *ngIf="pageLoaded === false"></mat-spinner>-->
    <mat-drawer mode="side" opened class="side-panel">
      <span class="text-center"> Your labs: </span>
      <div class="card-body">
        <div *ngFor="let lab of labs">
          <mat-list>
            <mat-list-item>
              {{ lab.labClass.classId}}
              {{ lab.labDay}}
              {{ lab.startTime}}
              {{ lab.room }}
            </mat-list-item>
          </mat-list>
        </div>
      </div>
    </mat-drawer>
    <mat-drawer-content>
      <div class="current-lab">
        <label class="current-lab-label">Current lab:</label>
        <div class="current-lab-obj">
          <label *ngIf="currentLab !== undefined"> {{currentLab.labClass.classId}}</label>
          <label *ngIf="currentLab !== undefined"> {{currentLab.labClass.className}}</label>
          <!--    <label *ngIf="currentLab !== undefined"> {{currentLab.startTime}}</label>-->
          <label *ngIf="currentLab !== undefined"> until {{currentLab.endTime}}</label>

          <!--      <label *ngIf="currentLab !== undefined"> {{currentLab.labClass.classId}} {{currentLab.labClass.className}} until {{currentLab.endTime}}</label>-->
        </div>
      </div>
      <div class="next-lab">
        <label class="next-lab-label">Next lab:</label>
        <div class="next-lab-obj" *ngIf="nextLab != undefined">
          <label> {{nextLab.labClass.classId}}</label>
          <label> {{nextLab.labClass.className}}</label>
          <label> From {{nextLab.startTime}}</label>
        </div>
      </div>
      <div class="demoBtn" *ngIf="currentLab != undefined">
        <button class="demo-button" type="submit" *ngIf="!isDemo && !isGradeSet && role === 'student'"
                (click)="demonstrate()">Demonstrate
        </button>

        <div class="demotable" *ngIf="demoTable != null && isDemo">
          <table mat-table [dataSource]="demoTable">
            <ng-container matColumnDef="num">
              <th mat-header-cell *matHeaderCellDef>  </th>
              <td mat-cell *matCellDef="let element;let i=index"> {{i + 1}}. </td>
            </ng-container>
            <ng-container matColumnDef="person.firstName">
              <th mat-header-cell *matHeaderCellDef> Student </th>
              <td mat-cell *matCellDef="let user"> {{user.person.firstName}} </td>
            </ng-container>
            <ng-container matColumnDef="person.lastName">
              <th mat-header-cell *matHeaderCellDef>  </th>
              <td mat-cell *matCellDef="let user"> {{user.person.lastName}} </td>
            </ng-container>
            <ng-container matColumnDef="instructorBtn">
              <th mat-header-cell *matHeaderCellDef>  </th>
              <!--    <td mat-cell *matCellDef="let element; let i=index;"> <button *ngIf="i==0 && role !== 'student'" (click)="goToGrade(element)">Add Grade</button> </td>-->
              <td mat-cell *matCellDef="let element; let i=index;">
                <button *ngIf="isFirstPos === element && role !== 'student' && element.demo === 'yes' && isAvailable" mat-raised-button
                        (click)="acceptStudent(element)">Accept
                </button>
                <button *ngIf=" role !== 'student' && element.demo === 'live' && studentName === element.person.dsUsername" mat-raised-button
                        (click)="addGrade(element)">Add Grade
                </button>
                <button mat-raised-button class="button" type="submit"
                        *ngIf="isDemo && role === 'student' && username === element.person.dsUsername"
                        (click)="stopDemo(element)">Leave
                </button>
              </td>
            </ng-container>
<!--            <ng-container matColumnDef="studentBtn">-->
<!--              <th mat-header-cell *matHeaderCellDef> btn </th>-->
<!--              &lt;!&ndash;    <td mat-cell *matCellDef="let element; let i=index;"> <button *ngIf="i==0 && role !== 'student'" (click)="goToGrade(element)">Add Grade</button> </td>&ndash;&gt;-->
<!--              <td mat-cell *matCellDef="let element; let i=index;">-->
<!--                <button mat-raised-button class="button" type="submit"-->
<!--                        *ngIf="isDemo && role === 'student' && username === element.person.dsUsername"-->
<!--                        (click)="stopDemo(element)">Leave-->
<!--                </button>-->
<!--              </td>-->
<!--            </ng-container>-->
            <ng-container matColumnDef="liveDemo">
              <th mat-header-cell *matHeaderCellDef> Status </th>
              <td mat-cell *matCellDef="let user">
                <span *ngIf="user.demo === 'live'" class="demo-label"> Currently demonstrating... </span>
                <span *ngIf="user.demo === 'yes' && username === user.person.dsUsername">{{format(mm)}}:{{format(ss)}}:{{format(ms)}}</span>
              </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
        <!--    <button mat-raised-button class="button" type="submit" *ngIf="isDemo && role === 'student'" (click)="stopDemo()">Leave</button>-->
      </div>

      <div class="mark" *ngIf="isGradeSet">
        <span>Your demonstration has been marked! Grade: {{studentGrades.grade}}
          Comment: {{studentGrades.gradeComment}}</span>
      </div>
      <div class="display">{{format(mm)}}:{{format(ss)}}:{{format(ms)}}</div>
    </mat-drawer-content>
  </mat-drawer-container>
</div>


<!--<router-outlet></router-outlet>-->
